import pytest
from playwright.sync_api import sync_playwright, expect

@pytest.fixture(scope="function")
def setup():
    # Launch browser and context
    with sync_playwright() as p:
        browser = p.chromium.launch(headless=False)  # set to True for headless mode
        context = browser.new_context()
        page = context.new_page()
        yield page
        context.close()
        browser.close()

def test_comet_login(setup):
    page = setup

    # Navigate directly to the target login page
    page.goto("https://qa.workshine.com:8443/", timeout=60000)

    # Wait for email field to be visible, then fill it (use fill for reliability)
    selector = 'input[name="emailId"]'
    page.wait_for_selector(selector, timeout=15000)
    # Use the corrected support email (removed extra 's')
    page.fill(selector, "itsupport@infyshine.com")

    # (Optional) - handle password or captcha if needed later
    # page.fill('input[name="password"]', 'your_password')

    # Add assertion or validation as needed
    expect(page.locator('input[name="emailId"]')).to_have_value("itsupport@infyshine.com")
